"use strict";Array.prototype.slice,module.exports=function(t,e){if(!t)throw new TypeError("argument res is required");if("function"!=typeof e)throw new TypeError("argument listener must be a function");t.writeHead=function(t,e){var r=!1;return function(){var i=function(t){var e,r,i,s,n,o=arguments.length,a=o>1&&"string"==typeof arguments[1]?2:1,u=o>=a+1?arguments[a]:void 0;if(this.statusCode=t,Array.isArray(u))for(e=0,r=u.length;e<r;++e)this.setHeader(u[e][0],u[e][1]);else if(u)for(i=Object.keys(u),e=0;e<i.length;e++)(s=i[e])&&this.setHeader(s,u[s]);for(n=Array(Math.min(o,a)),e=0;e<n.length;e++)n[e]=arguments[e];return n}.apply(this,arguments);r||(r=!0,e.call(this),"number"==typeof i[0]&&this.statusCode!==i[0]&&(i[0]=this.statusCode,i.length=1)),t.apply(this,i)}}(t.writeHead,e)};